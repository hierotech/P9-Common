!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("big.js"),require("decimal.js")):"function"==typeof define&&define.amd?define(["big.js","decimal.js"],e):"object"==typeof exports?exports.P9Common=e(require("big.js"),require("decimal.js")):n.P9Common=e(n["big.js"],n["decimal.js"])}(global,(function(n,e){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var u=e[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var u in n)t.d(r,u,function(e){return n[e]}.bind(null,u));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=10)}([function(e,t){e.exports=n},function(n,t){n.exports=e},function(n,e,t){var r=t(4),u=t(5),i=t(6);n.exports=function(n){return r(n)||u(n)||i()}},function(n,e,t){var r=t(7),u=t(8),i=t(9);n.exports=function(n,e){return r(n)||u(n,e)||i()}},function(n,e){n.exports=function(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}},function(n,e){n.exports=function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}},function(n,e){n.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(n,e){n.exports=function(n){if(Array.isArray(n))return n}},function(n,e){n.exports=function(n,e){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)){var t=[],r=!0,u=!1,i=undefined;try{for(var o,c=n[Symbol.iterator]();!(r=(o=c.next()).done)&&(t.push(o.value),!e||t.length!==e);r=!0);}catch(a){u=!0,i=a}finally{try{r||null==c["return"]||c["return"]()}finally{if(u)throw i}}return t}}},function(n,e){n.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(n,e,t){"use strict";t.r(e);var r={};t.r(r),t.d(r,"CANDLESTICK_INTERVALS",(function(){return p})),t.d(r,"PORTFOLIO_PERFORMANCE_INTERVALS",(function(){return y})),t.d(r,"DEAL_TYPES",(function(){return m})),t.d(r,"IDENTITY_CARD_TYPES",(function(){return v})),t.d(r,"EXPECTED_SELL_FEE_COEFF",(function(){return w}));var u={};t.r(u),t.d(u,"getSuccessFeeDiscount",(function(){return g})),t.d(u,"getBuyPriceAmountSum",(function(){return T})),t.d(u,"getBuyAmountSum",(function(){return S})),t.d(u,"getAverageBuyPrice",(function(){return b})),t.d(u,"getUsedBuyingPower",(function(){return E})),t.d(u,"getOpenedUsedBuyingPower",(function(){return C})),t.d(u,"getClosedUsedBuyingPower",(function(){return O})),t.d(u,"getGrossValue",(function(){return _})),t.d(u,"getGrossProfit",(function(){return P})),t.d(u,"getOneMinusStrategyCoefficient",(function(){return j})),t.d(u,"getRealizedSuccessFee",(function(){return h})),t.d(u,"getSuccessFee",(function(){return A})),t.d(u,"getRealizedSellFee",(function(){return D})),t.d(u,"getSellFee",(function(){return x})),t.d(u,"getNetProfit",(function(){return U})),t.d(u,"getRealizedNetProfit",(function(){return I}));var i={};t.r(i),t.d(i,"CURRENCY_TYPES",(function(){return H})),t.d(i,"cryptoAtomsToUnit",(function(){return z})),t.d(i,"formatCurrency",(function(){return V})),t.d(i,"isFiatCurrency",(function(){return k})),t.d(i,"isCryptoCurrency",(function(){return G})),t.d(i,"ratioPercent",(function(){return K}));var o={};t.r(o),t.d(o,"TIMESTAMP_PRECISION",(function(){return Q})),t.d(o,"createTimestamp",(function(){return X})),t.d(o,"delay",(function(){return $})),t.d(o,"hasOwnProperty",(function(){return J})),t.d(o,"stringifyQuery",(function(){return W})),t.d(o,"toChunks",(function(){return Z}));var c=t(2),a=t.n(c),f=t(0),s=t.n(f),l=t(1),d=t.n(l),p=["1m","5m","15m","1h","4h","1d"],y=["1h","1d","1w"],m=["IPO","PRE_IPO","STARTUP","ETF"],v=["passport"],w=.005;function g(n){var e=n.success_fee_discount,t=Date.now()<new Date(n.created_at).getTime()+15552e6,r=n.referrer_id&&t?.5:null;return e&&r?Math.max(Number(e),r):e||r}function T(n){return n.filter((function(n){return"buy"===n.type})).reduce((function(n,e){var t=e.quantity,r=e.price;return n.plus(new s.a(r).times(t))}),new s.a(0))}function S(n){return n.filter((function(n){return"buy"===n.type})).reduce((function(n,e){var t=e.quantity;return n.plus(t)}),new s.a(0))}function b(n){var e=T(n),t=S(n);return t.eq(0)?new s.a(0):e.div(t)}function E(n){var e=T(n),t=S(n);if(t.eq(0))return new s.a(0);var r=e.div(t),u=n.filter((function(n){return"sell"===n.type})).reduce((function(n,e){var t=e.quantity;return n.plus(r.times(t))}),new s.a(0));return e.minus(u)}function C(n){return T(n)}function O(n,e){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,r=t&&new Date(t),u=r?n.filter((function(n){return new Date(n.timestamp)<r})):n,i=T(u),o=S(u);if(o.eq(0))return new s.a(0);var c=i.div(o);return c.times(e)}function _(n,e){var t=new s.a(n.price_last).times(n.quantity);if("ETF"===n.deal_type)return t;var r=e.filter((function(n){return"sell"===n.type})).reduce((function(n,e){var t=e.quantity,r=e.price;return n.plus(new s.a(r).times(t))}),new s.a(0));return t.plus(r)}function P(n,e){var t=_(n,e);return"ETF"===n.deal_type?t.minus(E(e)):t.minus(T(e))}function j(n){var e=E(n);if(e.eq(0))return new s.a(0);if(e.lte(1e4))return new s.a(.2);if(e.gte(12e5))return new s.a(.04);var t=new d.a(e.toString()).pow(.876);return new s.a(50.75).minus(d.a.log(t,1.3)).div(100)}function h(n){return n.filter((function(n){return"success_fee"===n.type})).reduce((function(n,e){var t=e.amount;return n.plus(t)}),new s.a(0))}function A(n,e,t){if("closed"===n.deal_status)return h(e);var r=b(e),u=new s.a(n.price_last).minus(r).times(n.quantity),i=e.filter((function(n){return"sell"===n.type})).reduce((function(n,e){var t=e.price,u=e.quantity;return n.plus(new s.a(u).times(new s.a(t).minus(r)))}),new s.a(0)),o=t&&g(t),c=u.plus(i).times(j(e));return o?c.times(new s.a(1).minus(o)):c}function D(n){return n.filter((function(n){return"sell_fee"===n.type})).reduce((function(n,e){var t=e.amount;return n.plus(t)}),new s.a(0))}function x(n,e){return"ETF"===n.deal_type||"closed"===n.deal_status?D(e):_(n,e).times(w)}function U(n,e,t){var r=P(n,e);if("ETF"===n.deal_type)return r;var u=A(n,e,t),i=x(n,e);return r.minus(u.plus(i))}function I(n,e){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,u=e.reduce((function(n,e){var t=e.quantity,r=e.price;return n.plus(new s.a(r).times(t))}),new s.a(0)),i=e.reduce((function(n,e){var t=e.quantity;return n.plus(t)}),new s.a(0)),o=new Date(Math.max.apply(Math,a()(e.map((function(n){return n.timestamp}))))),c=u.minus(O(n,i,o)),f=t&&new Date(t),l=r&&new Date(r),d=f&&l?n.filter((function(n){var e=new Date(n.timestamp);return e>=f&&e<l})):n,p=h(d),y=D(d);return c.minus(p.plus(y))}var R=t(3),M=t.n(R),q=new Set(["USD"]),F={USD:2,BTC:8,ETH:8},N={USD:"$",BTC:"₿",ETH:"Ξ"},B={BTC:new s.a("100000000"),ETH:new s.a("1000000000000000000")},H=["USD","BTC","ETH"];function L(n,e){return N[e]+" "+n}function Y(n){var e=n.split("."),t=M()(e,2),r=t[0],u=t[1];return"".concat(r.replace(/\B(?=(\d{3})+(?!\d))/g,","),".").concat(u)}function z(n,e){return new s.a(n).div(B[e])}function V(n,e){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},r=t.withSign,u=void 0!==r&&r,i=t.withSeparators,o=void 0===i?u:i,c=F[e],a=new s.a(n),f=a.toFixed(c);return o&&(f=Y(f)),u&&(f=L(f,e)),f}function k(n){return q.has(n.toUpperCase())}function G(n){return!k(n)}function K(n,e){var t=new s.a(n),r=new s.a(e);return t.div(r).times(100)}var Q={MILLISECOND:0,SECOND:1,MINUTE:2,HOUR:3,DAY:4,MONTH:5};function X(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Q.HOUR,e=new Date;return n>=Q.SECOND&&e.setUTCMilliseconds(0),n>=Q.MINUTE&&e.setUTCSeconds(0),n>=Q.HOUR&&e.setUTCMinutes(0),n>=Q.DAY&&e.setUTCHours(0),n>=Q.MONTH&&e.setUTCDate(1),e}function $(n){return new Promise((function(e){return setTimeout(e,n)}))}function J(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function W(n){return Object.keys(n).map((function(e){var t=n[e];return Array.isArray(t)?t.map((function(n){return"".concat(e,"=").concat(encodeURIComponent(n))})).join("&"):"".concat(e,"=").concat(encodeURIComponent(t))})).join("&")}function Z(n,e){return[].concat.apply([],n.map((function(t,r){return r%e?[]:[n.slice(r,r+e)]})))}t.d(e,"Assets",(function(){return u})),t.d(e,"Constants",(function(){return r})),t.d(e,"Currency",(function(){return i})),t.d(e,"Helper",(function(){return o}))}])}));
//# sourceMappingURL=index.node.js.map